<?php

namespace Defunc\NakaCMSBundle\DataFixtures;

use HouseOfAgile\NakaCMSBundle\Factory\WorkshopEventFactory;
use HouseOfAgile\NakaCMSBundle\Factory\WorkshopEventTranslationFactory;
use Doctrine\Bundle\FixturesBundle\Fixture;
use Doctrine\Persistence\ObjectManager;

class WorkshopEventFixturesPP extends Fixture
{
    protected $allLocales;
    public function __construct(
        $allLocales
    ) {
        $this->allLocales = $allLocales;
    }

    public function load(ObjectManager $manager)
    {
        $translations = array_map(function ($locale) {
            return WorkshopEventTranslationFactory::new(['locale' => $locale]);
        }, $this->allLocales);
        WorkshopEventFactory::createMany(100, function () use ($translations) {
            return [
                // 'pageGallery' => PageGalleryFactory::createOne([
                //     'images' => PictureFactory::randomRange(3, 5),
                // ]),
                'translations' => $translations,
            ];
        });
        $manager->flush();
    }

}
